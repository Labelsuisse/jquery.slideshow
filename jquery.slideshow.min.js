/**
 * Plugin Simpe Slide Show for jquery
 * Author: Labelsuisse
 * version: 0.2.0
 * https://github.com/Labelsuisse/jquery.slideshow
 * @2014
 */

!function(a){a.fn.nextOrFirst=function(b){var c=a(this);return c.next().length?c.next():c.parent().find(b).first()},a.fn.prevOrLast=function(b){var c=a(this);return c.prev().length?c.prev():c.parent().find(b).last()},a.fn.slideshow=function(b){var i,j,l,o,p,c={btnStyle:{},btnStyleLeft:{},btnStyleRight:{},containerStyle:{position:"relative",border:"3px solid #F2F2F2"},fadeOutSpeed:"slow",fadeInSpeed:"slow",imageStyle:{textAlign:"center",backgroundColor:"#fff"},markerStyle:{position:"absolute",right:5,bottom:19,zIndex:10},markerCurrentBgColor:"rgb(3, 150, 191)",pointStyle:{display:"inline-block",margin:"0px 2px",borderRadius:5,height:10,width:10,background:"#fff",cursor:"pointer"},titleStyle:{position:"absolute",textAlign:"center",color:"#fff",background:"rgba(0, 0, 0, .3)",bottom:20,height:30,width:"100%",paddingTop:5},transitionAuto:3e3,resizeImage:!1},d={padding:0,margin:0,listStyle:"none"},e={background:"#fff",width:"100%"},f={width:50,top:5,position:"absolute",display:"none",color:"rgb(3, 150, 191)",cursor:"pointer",textAlign:"center",fontSize:"3em",zIndex:100},g={overflow:"hidden",height:"inherit",width:"inherit"},h=a(this),k=h.children(),m="view-current",q="undefined"==typeof b.btnStyle&&"undefined"==typeof b.btnStyleLeft&&"undefined"==typeof b.btnStyleRight,r=function(b){return a(document.createElement(b))},s=function(a){var b=a.attr("id").split("-");return b[b.length-1]},t=function(c){var e,d=p.find("span");d.css("background",b.pointStyle.background),e=c?a("#marker-point-"+c):d.first(),e.css("background",b.markerCurrentBgColor)},u=function(a,b){return"width"===a?b.height()/j:"height"===a?b.width()/i:void 0},v=function(a){return b.resizeImage&&(i>j?a.width()/u("width",a)>i?a.width(i):a.height(j):a.height()/u("height",a)>j?a.height(j):a.width(i)),a},w=function(c,d){a(".view-current").removeClass(m).fadeOut(b.fadeOutSpeed,function(){var d=a(this)[c]("li").fadeIn(b.fadeInSpeed).addClass(m);t(s(d))}),d&&clearInterval(o)},x=function(){var a,c,d=function(){w("prevOrLast",!0)},e=function(){w("nextOrFirst",!0)},g=function(a,b){for(var d in b)a[d]=b[d];c.top=(h.height()-c.height)/2,c.lineHeight=c.height+"px"};for(q?(c=f,c.height=j-b.titleStyle.height-b.titleStyle.bottom-10,c.lineHeight=c.height+"px"):(c=b.btnStyle,c.top=(h.height()-c.height)/2,c.lineHeight=c.height+"px"),a=0;2>a;a++){var k,i=r("div");0==a?(q?c.left=0:g(c,b.btnStyleLeft),k="<",i.attr("id","slider-btn-left"),i.on("click",d)):(q?c.right=0:g(c,b.btnStyleRight),k=">",i.attr("id","slider-btn-right"),i.on("click",e),delete c.left),q&&y(h,c.width),i.text(k),i.css(c),h.append(i)}},y=function(b,c){var b=a(b),d=b.offset(),e=d.left+b.width(),f=c||e/2/2,g=d.left,h=d.left+f,i=e-f,j=d.top+b.height();b.on("mousemove",function(a){a.clientX>g&&a.clientX<h&&a.clientY>d.top&&a.clientY<j?b.find("#slider-btn-left").show():a.clientX>i&&a.clientX<e&&a.clientY>d.top&&a.clientY<j?b.find("#slider-btn-right").show():b.find("#slider-btn-left").hide().end().find("#slider-btn-right").hide()}).on("mouseout",function(){b.find("#slider-btn-left").hide().end().find("#slider-btn-right").hide()})};b=a.extend(!0,c,b),h.css(b.containerStyle),i=h.width(),j=h.height(),p=r("div").css(b.markerStyle),h.append(p),l=r("ul").css(d).appendTo(h),a.each(k,function(c,d){var f,g,h,k;d=a(d),j>i&&(console.log(j/u("height",d.find("img"))),b.imageStyle.marginTop=0),g=r("div").css(b.titleStyle).text(v(d.find("img")).attr("title")),h=r("div").css(b.imageStyle).append(d),f=r("li").css(e).attr("id","slide-image-"+c).append(g).append(h).appendTo(l),k=r("span").css(b.pointStyle).attr("id","marker-point-"+c),0==c?(k.css("background",b.markerCurrentBgColor),f.addClass(m)):f.css({display:"none"}),p.append(k)}),x(),p.find("span").on("click",function(){var c=s(a(this));a(".view-current").removeClass(m).fadeOut(b.fadeOutSpeed,function(){a("#slide-image-"+c).fadeIn(b.fadeInSpeed).addClass(m),t(c)}),clearInterval(o)}),o=setInterval(function(){w("nextOrFirst")},b.transitionAuto),h.append(r("div").css(g).append(h.children()))}}(window.jQuery);